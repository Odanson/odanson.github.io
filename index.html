<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Samson Odan — Research</title>
  <meta name="description" content="PhD Candidate • Max Planck School of Cognition & MPI MiS • Consciousness, statistical complexity, neural RL." />
  <meta property="og:title" content="Samson Odan — Research" />
  <meta property="og:description" content="Complexity • Consciousness • Mathematical theory of learning." />
  <meta property="og:image" content="/og-image.png" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="color-scheme" content="light dark" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ["Inter var","Inter","ui-sans-serif","system-ui","-apple-system","Segoe UI","Roboto"] },
          colors: { ink: { 50:'#f6f6f7',100:'#ececef',200:'#dadae0',300:'#b6b7c1',400:'#8f91a2',500:'#6a6d84',600:'#505368',700:'#393c4f',800:'#23263a',900:'#0f1226',950:'#0a0c1a'} }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :focus-visible{outline:2px solid #6366f1;outline-offset:2px}
    @media (min-width: 1024px){ .sticky-safe{position:sticky; top:0; height:100dvh} }

    .chip{
      display:inline-flex;align-items:center;border-radius:9999px;
      border:1px solid rgba(148,163,184,.3); /* gray-300ish */
      padding:.125rem .625rem; /* py-0.5 px-2.5 */
      font-size:.75rem;line-height:1rem;color:#374151; /* gray-700 */
    }
    html.dark .chip{ color:#d1d5db; border-color:rgba(55,65,81,.5);} /* dark:gray-300 / dark:border-gray-700 */

    .linkish{ text-decoration:underline; text-decoration-color:rgba(99,102,241,.4); }
    .linkish:hover{ text-decoration-color:rgb(99,102,241); }

    .drop-active{
      border-color:rgb(129,140,248); /* indigo-400 */
      background:rgba(238,242,255,.4); /* indigo-50-ish */
    }
    html.dark .drop-active{
      border-color:rgb(99,102,241); /* indigo-500 */
      background:rgba(10,12,26,.2); /* your dark ink */
    }
  </style>
  <!-- Structured data: Person -->
  <script type="application/ld+json">{
    "@context":"https://schema.org",
    "@type":"Person",
    "name":"Samson Odan",
    "jobTitle":"PhD Candidate",
    "affiliation":[{"@type":"Organization","name":"Max Planck School of Cognition"},{"@type":"Organization","name":"Max Planck Institute for Mathematics in the Sciences"}],
    "email":"mailto:odansamson@gmail.com",
    "url":"https://odanson.github.io/",
    "sameAs":["https://github.com/Odanson","https://www.linkedin.com/in/samson-odan-930399118","https://orcid.org/0009-0002-2909-0831","https://x.com/OdansonS"]
  }</script>
</head>
<body class="bg-white text-ink-900 dark:bg-ink-900 dark:text-ink-100 antialiased">

  <!-- 1) Mobile header (place right after <body> and before your grid) -->
  <!-- Mobile header -->
  <header class="lg:hidden sticky top-0 z-40 bg-white/80 dark:bg-ink-900/60 backdrop-blur border-b border-ink-200/60 dark:border-ink-700/60">
    <div class="px-4 h-12 flex items-center gap-3">
      <button id="navToggle" class="p-2 rounded-lg border border-ink-200 dark:border-ink-700"
              aria-label="Open navigation" aria-controls="sidebar" aria-expanded="false">
        <!-- hamburger icon -->
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <span class="font-semibold">Samson Odan</span>
    </div>
  </header>

  <div class="lg:grid lg:grid-cols-[320px,1fr] min-h-screen">
    <!-- 2) Sidebar as off-canvas drawer -->
    <!-- Sidebar -->
    <aside id="sidebar"
      class="fixed inset-y-0 left-0 z-50 w-80 max-w-[85vw]
             -translate-x-full transition-transform duration-300 ease-out
             border-r border-ink-200/60 dark:border-ink-700/60
             bg-white/90 dark:bg-ink-900/80 backdrop-blur
             lg:translate-x-0 lg:static lg:w-auto lg:max-w-none lg:border-b-0 lg:border-r
             sticky-safe">

      <div class="p-6 lg:p-8 flex flex-col items-center lg:items-start text-center lg:text-left gap-5 lg:gap-7">

        <!-- Portrait -->
        <img src="portrait.jpg" alt="Portrait of Samson Odan"
             class="w-24 h-24 lg:w-20 lg:h-20 rounded-full object-cover shadow" decoding="async" fetchpriority="high" />

        <!-- Name -->
        <h1 class="text-2xl lg:text-xl font-semibold tracking-tight">Samson Odan</h1>

        <!-- Tagline -->
        <p class="max-w-[20rem] lg:max-w-none text-sm text-ink-500 dark:text-ink-300 leading-snug">
          PhD Candidate · Max Planck School of Cognition & MPI MiS.
        </p>

        <!-- Links -->
        <div class="mt-1 grid grid-cols-2 gap-x-4 gap-y-2 w-full max-w-xs lg:max-w-none text-sm">
          <a class="underline justify-self-center lg:justify-self-start"
             href="#" id="emailReveal" data-user="odansamson" data-domain="gmail" data-tld="com">Email</a>
          <a rel="me" class="underline justify-self-center lg:justify-self-start" href="https://github.com/Odanson">GitHub</a>
          <a rel="me" class="underline justify-self-center lg:justify-self-start" href="https://www.linkedin.com/in/samson-odan-930399118">LinkedIn</a>
          <a rel="me" class="underline justify-self-center lg:justify-self-start" href="https://orcid.org/0009-0002-2909-0831">ORCID</a>
          <a rel="me" class="underline justify-self-center lg:justify-self-start col-span-2" href="https://x.com/OdansonS">X</a>
        </div>

        <!-- Desktop nav (unchanged, still hidden on mobile) -->
        <nav class="hidden lg:block w-full">
          <ul class="space-y-2 text-sm">
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#intro">Intro</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#highlights">Highlights</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#publications">Publications</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#experience">Experience</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#talks">Talks</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#awards">Awards</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#extracurricular">Extracurricular</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#skills">Skills</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#journey">Journey</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-ink-50 dark:hover:bg-ink-800" href="#contact">Contact</a></li>
          </ul>
        </nav>

        <!-- Actions -->
        <div class="mt-auto grid grid-cols-2 gap-3 w-full max-w-xs lg:max-w-none">
          <button id="themeToggle" aria-label="Toggle light/dark theme"
                  class="text-center rounded-xl border border-ink-200 dark:border-ink-700 px-3 py-1.5 text-xs"
                  aria-pressed="false">Toggle theme</button>

          <button id="printCV"
                  class="text-center rounded-xl border border-ink-200 dark:border-ink-700 px-3 py-1.5 text-xs">
            Print CV
          </button>

          <button id="genOG"
                  class="col-span-2 text-center rounded-xl border border-ink-200 dark:border-ink-700 px-3 py-1.5 text-xs">
            Generate social image
          </button>

          <a href="Samson_Odan_CV.pdf" target="_blank" rel="noopener"
             class="col-span-2 text-center rounded-xl border border-ink-200 dark:border-ink-700 px-3 py-1.5 text-xs">
            Download
          </a>
        </div>
      </div>
    </aside>

    <!-- Backdrop for mobile drawer -->
    <div id="backdrop" class="lg:hidden fixed inset-0 z-40 bg-black/40 hidden"></div>

    <!-- ...rest of your main content... -->
    <main id="content" class="px-5 sm:px-8 md:px-12 lg:px-16 xl:px-24 py-10">
      <!-- Intro / Hero -->
      <section id="intro" class="max-w-4xl">
        <h2 class="text-3xl md:text-4xl font-semibold tracking-tight leading-tight">
          Complexity Science, Consciousness and Mathematical Theory of Learning.
        </h2>

        <p class="mt-4 text-ink-600 dark:text-ink-300">
          I apply methods from <span class="font-medium">complexity science</span> and
          <span class="font-medium">information theory</span> to investigate the neural basis of
          consciousness. Beyond this, I study the <span class="font-medium">mathematical theory of
          learning</span> in neural networks and cognitive systems, and how these ideas can be
          implemented in <span class="font-medium">neurorobotics</span>. My research is inherently
          <span class="font-medium">interdisciplinary</span>, integrating neuroscience, mathematics,
          and artificial intelligence.
        </p>

        <div class="mt-6 grid gap-4 sm:grid-cols-2">
          <a href="#publications" class="rounded-2xl border border-ink-200 dark:border-ink-700 p-4 hover:bg-ink-50 dark:hover:bg-ink-800">View publications</a>
          <a href="#highlights" class="rounded-2xl border border-ink-200 dark:border-ink-700 p-4 hover:bg-ink-50 dark:hover:bg-ink-800">Current projects</a>
        </div>
      </section>

      <!-- Highlights Grid -->
      <section id="highlights" class="mt-16">
        <div class="flex items-end justify-between">
          <h3 class="text-2xl font-semibold tracking-tight">Research Highlights</h3>
          <div class="text-sm"><a class="underline" href="#publications">See all →</a></div>
        </div>
        <div class="mt-6 grid gap-6 md:grid-cols-2 xl:grid-cols-3">
          
          <!-- Neural Complexity -->
          <article class="group rounded-2xl border border-ink-200 dark:border-ink-700 p-5 hover:shadow-sm transition">
            <h4 class="font-medium">Neural Complexity & States of Consciousness</h4>
            <p class="mt-2 text-sm text-ink-600 dark:text-ink-300">
              Investigating how statistical and information-theoretic measures (SC, LZc, ApEn, etc.) capture dynamics of
              consciousness across sleep, wakefulness, and psychedelic states.
            </p>
            <div class="mt-3 flex flex-wrap gap-3 text-xs">
              <a class="underline" href="https://doi.org/10.20944/preprints202410.0649.v1" target="_blank" rel="noopener noreferrer">Preprint</a>
            </div>
          </article>
          
          <!-- Metaheuristic Paper -->
          <article class="group rounded-2xl border border-ink-200 dark:border-ink-700 p-5 hover:shadow-sm transition">
            <h4 class="font-medium">Metaheuristic Method for Solving Systems of Equations</h4>
            <p class="mt-2 text-sm text-ink-600 dark:text-ink-300">
              Developed a novel metaheuristic approach for solving nonlinear systems of equations,
              bridging ideas from neural computation and evolutionary search.
            </p>
            <div class="mt-3 flex flex-wrap gap-3 text-xs">
              <a class="underline" href="https://arxiv.org/abs/2409.16958" target="_blank" rel="noopener noreferrer">Preprint</a>
            </div>
          </article>
          
          <!-- Robotics Project -->
          <article class="group rounded-2xl border border-ink-200 dark:border-ink-700 p-5 hover:shadow-sm transition">
            <h4 class="font-medium">Synaptic Homeostasis in Robotics</h4>
            <p class="mt-2 text-sm text-ink-600 dark:text-ink-300">
              Applied Continuous-Time Recurrent Neural Networks (CTRNNs) with homeostatic plasticity
              for adaptive robotic control, enabling stable navigation under changing environments.
            </p>
            <div class="mt-3 flex flex-wrap gap-3 text-xs">
              <a class="underline" href="https://github.com/Odanson/Homeostatic-Plasticity-in-Robotics" target="_blank" rel="noopener noreferrer">Repo</a>
            </div>
          </article>
        </div>
      </section>

      <!-- ===== Experience (data-driven) ===== -->
      <section id="experience" class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-0 py-12 scroll-mt-24">
        <h2 class="text-2xl font-semibold tracking-tight text-gray-900 dark:text-gray-100">Experience</h2>
        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Selected research and industry roles. See CV for full details.</p>
        <ol id="expTimeline" class="relative mt-8 border-l border-gray-200 dark:border-gray-700"></ol>
      </section>

      <!-- ===== Publications & Preprints (with .bib drag-and-drop) ===== -->
      <section id="publications" class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-0 py-12 scroll-mt-24">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
          <aside class="lg:col-span-4">
            <h2 class="text-2xl font-semibold tracking-tight text-gray-900 dark:text-gray-100">Publications</h2>
            <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Preprints, papers, and talks. “Selected Works” highlights a few key items.</p>

            <div class="mt-6 rounded-2xl border border-gray-200 dark:border-gray-800 bg-white/70 dark:bg-gray-900/60 backdrop-blur-sm p-4">
              <div class="flex items-center justify-between">
                <h3 class="text-sm font-medium text-gray-900 dark:text-gray-100">Selected Works</h3>
                <button id="toggleSelected" class="text-xs px-2 py-1 rounded-md border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800">Show Only</button>
              </div>
              <ul id="selectedList" class="mt-4 space-y-3 text-sm"></ul>
            </div>

            <div class="mt-6 flex flex-wrap gap-2">
              <button data-filter="all" class="pub-filter px-2.5 py-1 text-xs rounded-full border border-gray-300 dark:border-gray-700">All</button>
              <button data-filter="preprint" class="pub-filter px-2.5 py-1 text-xs rounded-full border border-gray-300 dark:border-gray-700">Preprints</button>
              <button data-filter="journal" class="pub-filter px-2.5 py-1 text-xs rounded-full border border-gray-300 dark:border-gray-700">Journals</button>
              <button data-filter="conference" class="pub-filter px-2.5 py-1 text-xs rounded-full border border-gray-300 dark:border-gray-700">Conferences</button>
            </div>

            <div id="bibDrop" class="hidden mt-6 rounded-2xl border-2 border-dashed border-gray-300 dark:border-gray-700 p-4 text-sm text-gray-600 dark:text-gray-400">
              <p class="font-medium text-gray-800 dark:text-gray-100">Drag & drop .bib here</p>
              <p class="mt-1">…or <label class="linkish cursor-pointer">choose file<input id="bibFile" type="file" accept=".bib" class="hidden"></label></p>
              <p class="mt-2 text-xs">We read <code>title</code>, <code>author</code>, <code>year</code>, <code>journal</code>/<code>booktitle</code>, <code>doi</code>, <code>eprint</code>, <code>url</code>. Add <code>keywords = {selected}</code> to mark Selected Works.</p>
              <div class="mt-4 flex flex-wrap gap-2">
                <button id="exportPubs" class="px-2.5 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-700">Export pubs.json</button>
                <button id="clearLocal" class="px-2.5 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-700">Clear local</button>
              </div>
            </div>
          </aside>

          <div class="lg:col-span-8">
            <div id="pubList" class="space-y-4"></div>
          </div>
        </div>
      </section>

      <!-- ===== Talks (data-driven) ===== -->
      <section id="talks" class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-0 py-12 scroll-mt-24">
        <h2 class="text-2xl font-semibold tracking-tight">Conferences & Talks</h2>
        <ul id="talkList" class="mt-6 space-y-4"></ul>
      </section>

      <!-- ===== Awards (data-driven) ===== -->
      <section id="awards" class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-0 py-12 scroll-mt-24">
        <h2 class="text-2xl font-semibold tracking-tight">Awards & Scholarships</h2>
        <ul id="awardList" class="mt-6 grid gap-4 sm:grid-cols-2"></ul>
      </section>

      <!-- ===== Extracurricular Activities ===== -->
      <section id="extracurricular" class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-0 py-12 scroll-mt-24">
        <h2 class="text-2xl font-semibold tracking-tight">Extracurricular Activities</h2>
        <ul id="extraList" class="mt-6 grid gap-4 sm:grid-cols-2"></ul>
      </section>

      <!-- ===== Skills (data-driven) ===== -->
      <section id="skills" class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-0 py-12 scroll-mt-24">
        <h2 class="text-2xl font-semibold tracking-tight">Skills</h2>
        <div id="skillGrid" class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>
      </section>

      <!-- ===== Journey (simple timeline) ===== -->
      <section id="journey" class="mt-16">
        <h3 class="text-2xl font-semibold tracking-tight">Academic Journey</h3>
        <ol class="mt-6 relative border-s border-ink-200 dark:border-ink-700">
          <li class="ms-6 pb-8"><span class="absolute -start-2.5 mt-1.5 h-4 w-4 rounded-full bg-ink-900 dark:bg-ink-100"></span><h4 class="font-medium">MSc — University of Sussex — 2023–2024</h4></li>
          <li class="ms-6 pb-2"><span class="absolute -start-2.5 mt-1.5 h-4 w-4 rounded-full bg-ink-900 dark:bg-ink-100"></span><h4 class="font-medium">B.Eng — Ahmadu Bello University — 2009–2014</h4></li>
        </ol>
      </section>

      <!-- ===== CV (selected publications read from PUBS) ===== -->
      <section id="cv" class="mt-16">
        <h3 class="text-2xl font-semibold tracking-tight">Short Curriculum Vitae</h3>
        <div class="mt-6 rounded-2xl border border-ink-200 dark:border-ink-700 p-6 print:shadow-none">
          <header class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
            <div>
              <h4 class="text-xl font-semibold">Samson Odan</h4>
              <p class="text-sm text-ink-600 dark:text-ink-300">PhD Candidate · Max Planck School of Cognition · MPI MiS</p>
            </div>
            <div class="text-sm text-ink-600 dark:text-ink-300">
              <a class="underline" href="#" data-user="odansamson" data-domain="gmail" data-tld="com" id="cvEmail">Email</a> ·
              <a rel="me" class="underline" href="https://github.com/Odanson">GitHub</a> ·
              <a rel="me" class="underline" href="https://www.linkedin.com/in/samson-odan-930399118">LinkedIn</a> ·
              <a rel="me" class="underline" href="https://orcid.org/0009-0002-2909-0831">ORCID</a>
            </div>
          </header>

          <div class="mt-6 grid md:grid-cols-3 gap-6">
            <section class="md:col-span-2">
              <h5 class="font-medium">Education</h5>
              <ul class="mt-3 space-y-2 text-sm">
                <li><strong>MSc</strong> — University of Sussex — 2023–2024</li>
                <li><strong>B.Eng</strong> — Ahmadu Bello University — 2009–2014</li>
              </ul>
              <h5 class="mt-6 font-medium">Experience</h5>
              <ul id="cvExp" class="mt-3 space-y-2 text-sm"></ul>
            </section>
            <section>
              <h5 class="font-medium">Selected Skills</h5>
              <ul id="cvSkills" class="mt-3 text-sm list-disc ms-5"></ul>
            </section>
          </div>

          <section class="mt-6">
            <h5 class="font-medium">Selected Publications</h5>
            <ul id="cvPubs" class="mt-3 space-y-2 text-sm"></ul>
          </section>
        </div>
      </section>

      <!-- Contact CTA -->
      <section id="contact" class="mt-16 mb-24">
        <div class="rounded-3xl border border-ink-200 dark:border-ink-700 p-8 md:p-10">
          <h3 class="text-2xl font-semibold tracking-tight">Contact</h3>
          <p class="mt-2 text-ink-600 dark:text-ink-300">I’m open to collaboration and talks. For the quickest response, email me; otherwise, connect on LinkedIn.</p>
          <div class="mt-4 flex flex-wrap gap-3 text-sm">
            <a id="emailLink" href="#" class="underline" data-user="odansamson" data-domain="gmail" data-tld="com">Reveal email</a>
            <a class="underline" href="mailto:odansamson@gmail.com?subject=Inquiry%20from%20website">Quick email</a>
            <a rel="me" class="underline" href="https://github.com/Odanson">GitHub</a>
            <a rel="me" class="underline" href="https://www.linkedin.com/in/samson-odan-930399118">LinkedIn</a>
            <a rel="me" class="underline" href="https://orcid.org/0009-0002-2909-0831">ORCID</a>
            <a rel="me" class="underline" href="https://x.com/OdansonS">X</a>
          </div>
        </div>
      </section>

      <footer class="pb-10 text-sm text-ink-500">© <span id="year"></span> Samson Odan — Built with HTML + Tailwind.</footer>
    </main>
  </div>


  <script>
    /* ----------------------- DATA ----------------------- */

    // Publications (your two preprints are default; imports will add more)
    let PUBS = [
      {
        id: "odan2024-complexity",
        type: "preprint",
        year: 2024,
        title: "Complexity Measures in Diverse Dynamical Regimes and Their Application to States of Consciousness",
        authors: ["Odan, Samson", "Barrett, Adam B. (Supervisor)"],
        venue: "Mathematical and Computational Biology (Preprints.org)",
        doi: "10.20944/preprints202410.0649.v1",
        arxiv: null,
        pdf: "https://doi.org/10.20944/preprints202410.0649.v1",
        code: null,
        selected: true,
        bibtex: `@article{odan2024complexity,
  title={Complexity Measures in Diverse Dynamical Regimes and Their Application to States of Consciousness},
  author={Odan, Samson and Barrett, Adam B.},
  year={2024},
  journal={Mathematical and Computational Biology},
  doi={10.20944/preprints202410.0649.v1}
}`
      },
      {
        id: "odan2024-metaheuristic",
        type: "preprint",
        year: 2024,
        title: "Metaheuristic Method for Solving Systems of Equations",
        authors: ["Odan, Samson"],
        venue: "Neural and Evolutionary Computing (cs.NE)",
        doi: "10.48550/arXiv.2409.16958",
        arxiv: "2409.16958",
        pdf: "https://arxiv.org/abs/2409.16958",
        code: null,
        selected: true,
        bibtex: `@misc{odan2024metaheuristic,
  title={Metaheuristic Method for Solving Systems of Equations},
  author={Samson Odan},
  year={2024},
  eprint={2409.16958},
  archivePrefix={arXiv},
  primaryClass={cs.NE},
  doi={10.48550/arXiv.2409.16958},
  url={https://arxiv.org/abs/2409.16958}
}`
      }
    ];

    // Keep an immutable snapshot of your built‑ins at boot
    const DEFAULT_PUBS = JSON.parse(JSON.stringify(PUBS));

    // Experience: newest first
    const EXPERIENCE = [
      {
        org: "MESEC — Mediterranean Society for Consciousness Science",
        role: "Research Collaborator (with Prof. Guillaume Dumas)",
        years: "08/2024–Present",
        bullets: [
          "Exploring how social interactions shape consciousness via Neuro-AI models.",
          "Computational modeling & hyperscanning to study inter-brain dynamics."
        ],
        tags: ["Python","Information Theory","Neuro-AI"]
      },
      {
        org: "Sussex Centre for Consciousness Science, University of Sussex",
        role: "Research Assistant (with Dr. Adam B. Barrett)",
        years: "04/2024–09/2024",
        bullets: [
          "Compared complexity metrics (Statistical Complexity, Lempel–Ziv, etc.) on iEEG across wake/sleep/psychedelics."
        ],
        tags: ["EEG/iEEG","Complexity","Signal Processing", "Consciousness"]
      },
      {
        org: "Future Technologies Labs, University of Sussex",
        role: "Lab Assistant (Robotics)",
        years: "10/2023–01/2024",
        bullets: [
          "CTRNN-based adaptive control; synaptic scaling experiments in CoppeliaSim."
        ],
        tags: ["CTRNN","Adaptive Control","robotic modelling", "Homeostatic plasticity"]
      },
      {
        org: "Outlier AI",
        role: "AI Math Trainer (Remote)",
        years: "09/2024–Present",
        bullets: [
          "Design and evaluate advanced math prompts; assess model solutions for correctness."
        ],
        tags: ["LLMs","Evaluation","Mathematics"]
      },
      {
        org: "Ahmadu Bello University",
        role: "Teaching Assistant",
        years: "2012–2014",
        bullets: [
          "Led tutorials in Mathematics, CAD (SolidWorks/AutoCAD), and MATLAB/JavaScript."
        ],
        tags: ["Tutorial","CAD","MATLAB", "Mathematics"]
      }
    ];

    // Talks (examples; tweak as needed)
    const TALKS = [
      {
        title: "Statistical Physics of Cognition Workshop",
        venue: "Institute of Physics, London, UK",
        year: 2024,
        type: "Poster",
        link: ""
      },
      {
        title: "SCCS Centre for Excellence Launch",
        venue: "Sussex Centre for Consciousness Science, University of Sussex",
        year: 2024,
        type: "Poster",
        link: ""
      },
      {
        title: "MESEC Workshop 2024",
        venue: "Corsica, France",
        year: 2024,
        type: "Talk",
        link: ""
      },
      { title: "Statistical Complexity distinguishes different states of consciousness", venue: "Harnack Haus, Berlin Germany", year: 2025, type: "Talk", link: "#" },
    ];

    // Awards & Scholarships
    const AWARDS = [
      { name: "Sussex Nigeria Scholarship", issuer: "University of Sussex", year: 2023 },
      { name: "Sussex Engineering and Informatics Masters Award", issuer: "School of Engineering & Informatics, University of Sussex", year: 2023 }
    ];

    // Skills Matrix
    const SKILLS = [
      { 
        group: "Programming Languages & Frameworks", 
        items: [
          "Python (advanced)",
          "Julia (intermediate)",
          "MATLAB (intermediate)",
          "JavaScript (intermediate)",
          "R (basic)",
          "Lua (basic)",
          "JAX",
          "TensorFlow",
          "PyTorch",
          "Keras",
          "scikit-learn",
          "DEAP"
        ] 
      },
      { 
        group: "Data Analysis", 
        items: [
          "Time Series Analysis (EEG/MEG)",
          "Data Compression (Lempel-Ziv)",
          "Feature Extraction",
          "Connectivity Analysis (Granger Causality)",
          "Dimensionality Reduction (PCA)"
        ] 
      },
      { 
        group: "Machine Learning", 
        items: [
          "Natural Language Processing",
          "Ensemble Learning",
          "Deep Learning",
          "Support Vector Machines",
          "Model Optimisation",
          "Distributed Training (GPU)"
        ] 
      },
      { 
        group: "Robotics & Autonomous Systems", 
        items: [
          "Dynamical Systems",
          "Adaptive Control Algorithms",
          "Evolutionary Algorithms",
          "Sensorimotor Integration",
          "Reinforcement Learning",
          "Autonomous Navigation"
        ] 
      },
      { 
        group: "Software & Tools", 
        items: [
          "Git (Version Control)",
          "Webots",
          "CoppeliaSim",
          "Pygame",
          "AutoCAD",
          "SolidWorks",
          "Adobe Creative Suite",
          "MS Office",
          "SQL",
          "Excel",
          "R (basic)",
          "MS Power BI"
        ] 
      },
      { 
        group: "Research Techniques", 
        items: [
          "Literature Search",
          "Experimental Design",
          "Data Collection",
          "Statistical Analysis",
          "Hypothesis Testing",
          "Scientific Writing",
          "Public Presentation",
          "Manuscript Preparation",
          "Cross-Disciplinary Teamwork"
        ] 
      },
      { 
        group: "Languages", 
        items: [
          "English (Fluent)",
          "Igede (Native)",
          "Hausa (Basic)"
        ] 
      }
    ];

    // Extracurricular Activities
    const EXTRACURRICULAR = [
      { name: "Member, Mediterranean Society for Consciousness Science (MESEC)", years: "2024–Present", place: "Corsica, France" },
      { name: "Founding Member, Consciousness Society Sussex", years: "2024–Present", place: "University of Sussex, Brighton, UK" }
    ];

    /* ----------------------- THEME / BASICS ----------------------- */
    const root = document.documentElement;
    function applyTheme(t){ t==='dark'? root.classList.add('dark') : root.classList.remove('dark'); localStorage.setItem('theme', t); }
    const savedTheme = localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    applyTheme(savedTheme);
    document.getElementById('themeToggle')?.addEventListener('click', ()=>{
      const isDark = root.classList.contains('dark');
      const next = isDark ? 'light' : 'dark';
      applyTheme(next);
      const btn = document.getElementById('themeToggle');
      if (btn) btn.setAttribute('aria-pressed', String(next === 'dark'));
    });

    function setEmail(el){ const u=el.dataset.user, d=el.dataset.domain, t=el.dataset.tld; const addr=`${u}@${d}.${t}`; el.textContent=addr; el.href=`mailto:${addr}`; }
    document.getElementById('emailReveal')?.addEventListener('click', (e)=>{ e.preventDefault(); setEmail(e.currentTarget); });
    const emailLink = document.getElementById('emailLink'); emailLink?.addEventListener('click', (e)=>{ e.preventDefault(); setEmail(emailLink); });
    document.getElementById('cvEmail')?.addEventListener('click', (e)=>{ e.preventDefault(); const a=e.currentTarget; const addr='odansamson@gmail.com'; a.textContent=addr; a.href=`mailto:${addr}`; });

    document.getElementById('year').textContent = new Date().getFullYear();

    // Print the official PDF instead of the web page
    document.getElementById('printCV')?.addEventListener('click', (e) => {
      e.preventDefault();
      const pdfUrl = 'Samson_Odan_CV.pdf';

      // Open a helper tab
      const w = window.open('', '_blank');
      if (!w) {
        // Popup blocked: just open the PDF; user can press Cmd/Ctrl+P
        window.location.href = pdfUrl;
        return;
      }

      // Minimal viewer with a persistent print bar
      w.document.write(`<!doctype html>
<html><head><meta charset="utf-8"><title>Print CV</title>
<style>
  html,body{height:100%;margin:0}
  iframe{width:100%;height:100%;border:0}
  .bar{
    position:fixed;left:0;right:0;bottom:0;
    padding:8px 12px;background:#111;color:#fff;
    font:14px/1.2 system-ui, -apple-system, Segoe UI, Roboto;
    display:flex;gap:10px;align-items:center
  }
  .bar button{padding:6px 10px;border:0;border-radius:6px;cursor:pointer}
  @media print {.bar{display:none}}
</style></head>
<body>
  <iframe id="cvframe" src="${pdfUrl}" title="CV PDF"></iframe>
  <div class="bar">
    <button onclick="window.print()">Print now</button>
    <span>If the dialog didn’t open, use ⌘P / Ctrl+P.</span>
  </div>
  <script>
    const f = document.getElementById('cvframe');
    let tried = false;
    function tryPrint(){
      if(tried) return; tried = true;
      setTimeout(()=>{ window.focus(); window.print(); }, 700);
    }
    // Try after the PDF viewer signals ready…
    f.addEventListener('load', tryPrint);
    // …and also after a short timeout (some PDF viewers don't emit load reliably)
    setTimeout(tryPrint, 2000);
  <\/script>
</body></html>`);
    });
    document.getElementById('genOG')?.addEventListener('click', ()=>{
      const c=document.createElement('canvas'); c.width=1200; c.height=630; const ctx=c.getContext('2d');
      const g=ctx.createLinearGradient(0,0,1200,630); g.addColorStop(0,'#0f1226'); g.addColorStop(1,'#393c4f'); ctx.fillStyle=g; ctx.fillRect(0,0,1200,630);
      ctx.fillStyle='#ffffff'; ctx.font='bold 64px Inter, Arial, sans-serif'; ctx.fillText('Samson Odan',80,220);
      ctx.font='28px Inter, Arial, sans-serif'; ctx.fillText('Research — Complexity · Consciousness · Learning',80,280);
      ctx.font='24px Inter, Arial, sans-serif'; ctx.fillText('github.com/Odanson  ·  orcid.org/0009-0002-2909-0831',80,330);
      const a=document.createElement('a'); a.download='og-image.png'; a.href=c.toDataURL('image/png'); a.click();
      alert('Saved og-image.png. Add it to the repo root and wire your meta tags to it.');
    });

    // classify when p.type is missing
    function inferType(p){
      const v = (p.venue || '').toLowerCase();
      if (p.arxiv || v.includes('arxiv') || v.includes('preprint')) return 'preprint';
      if (/conf|conference|proceedings|neurips|iclr|icml|ccn/.test(v)) return 'conference';
      return 'journal';
    }

    // build the link badges for each pub card
    function buildLinks(p){
      const parts = [];
      if (p.doi) {
        const doi = String(p.doi).replace(/^https?:\/\/doi\.org\//,'');
        parts.push(linkBadge('DOI', `https://doi.org/${doi}`));
      }
      if (p.arxiv) parts.push(linkBadge('arXiv', `https://arxiv.org/abs/${p.arxiv}`));
      if (p.pdf)   parts.push(linkBadge('PDF', p.pdf));
      if (p.code)  parts.push(linkBadge('Code', p.code));
      return parts.join('');
    }

    /* ----------------------- PUBLICATIONS CORE ----------------------- */
    const LS_KEY = 'samson_pubs_v1';

    async function loadFromFile() {
      try {
        const r = await fetch('pubs.json', { cache: 'no-store' });
        if (!r.ok) return [];
        return await r.json();
      } catch (e) {
        return [];
      }
    }

    function loadLocal() {
      try { return JSON.parse(localStorage.getItem(LS_KEY) || '[]'); } catch { return []; }
    }
    function saveLocal(pubs) {
      localStorage.setItem(LS_KEY, JSON.stringify(pubs));
    }

    function byKey(p) {
      const doi = (p.doi||'').toLowerCase();
      const ax  = (p.arxiv||'').toLowerCase();
      if (doi) return 'doi:'+doi;
      if (ax)  return 'arxiv:'+ax;
      if (p.id) return 'id:'+p.id;
      return 'fallback:'+((p.title||'').toLowerCase()+'|'+(p.year||''));
    }

    function dedupe(list) {
      const seen = new Map();
      const score = o => ['doi','arxiv','pdf','code','venue','authors','bibtex'].reduce((s,f)=>s+(o[f]?1:0),0);
      for (const p of list) {
        const k = byKey(p);
        if (!seen.has(k)) seen.set(k, p);
        else {
          const a = seen.get(k), b = p;
          seen.set(k, score(b) > score(a) ? b : a);
        }
      }
      return [...seen.values()];
    }

    // On page load: fetch pubs.json + merge with local
    (async function initPubs(){
      const filePubs = await loadFromFile();
      PUBS = dedupe([...(PUBS||[]), ...filePubs, ...loadLocal()]);
      renderPubs();
    })();

    const pubList = document.getElementById('pubList');
    const selectedList = document.getElementById('selectedList');
    const toggleSelectedBtn = document.getElementById('toggleSelected');
    const filters = document.querySelectorAll('.pub-filter');
    let showOnlySelected = false;
    let activeFilter = 'all';
    function setActiveFilterButton(value){
      activeFilter = value;
      filters.forEach(x => x.classList.remove('bg-gray-100','dark:bg-gray-800'));
      document.querySelector(`.pub-filter[data-filter="${value}"]`)
        ?.classList.add('bg-gray-100','dark:bg-gray-800');
      renderPubs();
    }
    // mark “All” on first paint
    setActiveFilterButton('all');

    // --- Align first pub card with the top of "Selected Works" ---
    function alignPubsWithSelected() {
      const aside = document.querySelector('#publications aside');
      const selectedBox = aside?.querySelector('.p-4'); // the Selected Works card container
      const pubListEl = document.getElementById('pubList');
      if (!aside || !selectedBox || !pubListEl) return;

      const aTop = aside.getBoundingClientRect().top + window.scrollY;
      const sTop = selectedBox.getBoundingClientRect().top + window.scrollY;
      const offset = Math.max(0, Math.round(sTop - aTop));
      pubListEl.style.marginTop = offset + 'px';
    }

    window.addEventListener('load', alignPubsWithSelected);
    window.addEventListener('resize', alignPubsWithSelected);
    // also call after PUBS renders (it reflows heights)
    const _renderPubs = renderPubs;
    renderPubs = function() { _renderPubs(); alignPubsWithSelected(); };

    function fmtAuthors(authors) {
      function toSurnameInitial(raw) {
        if (!raw) return '';
        // Remove parenthetical notes like "(Supervisor)"
        let a = raw.replace(/\([^)]*\)/g, '').trim();

        // Try "Last, First ..." form first
        if (a.includes(',')) {
          const [last, firstPart] = a.split(',').map(s => s.trim());
          const initial = firstPart ? firstPart[0].toUpperCase() : '';
          const lastFmt = /odan/i.test(last) ? `<strong>${last}</strong>` : last;
          return `${lastFmt}.${initial}`;
        }

        // Fallback: "First Middle Last"
        const parts = a.split(/\s+/).filter(Boolean);
        const last = parts.pop() || '';
        const first = parts.shift() || '';
        const initial = first ? first[0].toUpperCase() : '';
        const lastFmt = /odan/i.test(last) ? `<strong>${last}</strong>` : last;
        return `${lastFmt}.${initial}`;
      }

      return (authors || []).map(toSurnameInitial).join(', ');
    }

    function linkBadge(label, href){
      if(!href) return '';
      return `<a href="${href}" target="_blank" rel="noopener"
    class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs
           text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700">${label}</a>`;
    }

    function card(p){
      const t = p.type || inferType(p);
      const typeColor = {
        preprint:'bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-700',
        journal:'bg-emerald-50 dark:bg-emerald-900/20 border-emerald-200 dark:border-emerald-700',
        conference:'bg-sky-50 dark:bg-sky-900/20 border-sky-200 dark:border-sky-700'
      }[t] || 'bg-white/70 dark:bg-gray-900/60';
      return `
      <article class="rounded-2xl border ${typeColor} backdrop-blur-sm p-4 shadow-sm" data-type="${t}" data-selected="${p.selected}">
        <div class="flex items-start justify-between gap-4">
          <div>
            <h3 class="font-medium text-gray-900 dark:text-gray-100">${p.title}</h3>
            <p class="mt-1 text-sm text-gray-700 dark:text-gray-300">${fmtAuthors(p.authors||[])}</p>
            <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">${p.venue||''}${p.year ? ' · ' + p.year : ''}</p>
          </div>
          <button class="copy-bib px-2 py-1 text-xs rounded-md border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800" data-bib='${encodeURIComponent(p.bibtex||"")}' title="Copy BibTeX">Copy</button>
        </div>
        <div class="mt-3 flex flex-wrap gap-2">
          <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs
                   text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700">
        ${t[0].toUpperCase()+t.slice(1)}
      </span>
          ${buildLinks(p)}
          ${p.selected ? `
      <span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs
                   text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700">
        Selected
      </span>` : ''}
        </div>
      </article>`;
    }
    function updateJSONLD(items){
      const ldId = 'pubs-jsonld'; document.getElementById(ldId)?.remove();
      const ld = items.map(p=>({
        "@context":"https://schema.org",
        "@type": (p.type||inferType(p))==="preprint" ? "PreprintDigitalDocument":"ScholarlyArticle",
        "name": p.title,
        "author": (p.authors||[]).map(a=>({"@type":"Person","name":a})),
        "datePublished": p.year?.toString(),
        "isPartOf": p.venue ? { "@type":"Periodical","name":p.venue } : undefined,
        "identifier": [].concat(
          p.doi ? [{ "@type":"PropertyValue","propertyID":"DOI","value": p.doi }] : [],
          p.arxiv ? [{ "@type":"PropertyValue","propertyID":"arXiv","value": p.arxiv }] : []
        ),
        "sameAs":[].concat(
          p.doi ? [`https://doi.org/${p.doi.replace(/^https?:\/\/doi.org\//,'')}`] : [],
          p.arxiv ? [`https://arxiv.org/abs/${p.arxiv}`] : []
        ),
        "url": p.doi ? `https://doi.org/${p.doi.replace(/^https?:\/\/doi.org\//,'')}` : (p.arxiv ? `https://arxiv.org/abs/${p.arxiv}` : undefined)
      }));
      const el=document.createElement('script'); el.id=ldId; el.type='application/ld+json'; el.textContent=JSON.stringify(ld,null,2); document.head.appendChild(el);
    }
    function renderPubs(){
      const items = PUBS
        .filter(p => (activeFilter==='all' || (p.type||inferType(p))===activeFilter))
        .filter(p => (!showOnlySelected || p.selected))
        .sort((a,b)=>(b.year||0)-(a.year||0));
      pubList.innerHTML = items.map(card).join('');
      const selected = PUBS.filter(p=>p.selected).sort((a,b)=>(b.year||0)-(a.year||0));
      selectedList.innerHTML = selected.map(p=>`<li><a href="#${p.id}" class="linkish">${p.title}</a><div class="text-[11px] text-gray-500 dark:text-gray-400">${p.venue||''} · ${p.year||''}</div></li>`).join('');
      Array.from(pubList.children).forEach((el,i)=>{ el.id = items[i].id || ('pub-'+i); });
      pubList.querySelectorAll('.copy-bib').forEach(btn=>{
        btn.addEventListener('click', ()=>{ const bib=decodeURIComponent(btn.getAttribute('data-bib')||''); navigator.clipboard.writeText(bib).then(()=>{btn.textContent='Copied'; setTimeout(()=>btn.textContent='Copy',1200);}); });
      });
      updateJSONLD(items);
      renderCvPubs(); // keep CV in sync
    }
    document.getElementById('toggleSelected')?.addEventListener('click',()=>{ showOnlySelected=!showOnlySelected; toggleSelectedBtn.textContent=showOnlySelected?'Show All':'Show Only'; renderPubs(); });
    // clicks use the same helper
    filters.forEach(b => b.addEventListener('click', () => {
      setActiveFilterButton(b.dataset.filter);
    }));

    // Bib parser / importer
    const drop = document.getElementById('bibDrop');
    const fileInput = document.getElementById('bibFile');
    // Enable imports locally (localhost/127.0.0.1/.local) or when ?admin is present
    const IMPORT_ENABLED =
      location.hostname === 'localhost' ||
      location.hostname === '127.0.0.1' ||
      location.hostname.endsWith('.local') ||
      location.search.includes('admin');
    // Only show the UI when enabled; otherwise remove it entirely
    if (drop) {
      if (IMPORT_ENABLED) {
        drop.classList.remove('hidden');
      } else {
        drop.remove();
      }
    }
    function parseBibTex(text){
      const entries = [];
      const raw = text.split(/\n@/).map((s,i)=> i===0 ? s : '@'+s).filter(s=>/@\w+\s*\{/.test(s));
      for(const block of raw){
        const headMatch = block.match(/@(\w+)\s*\{\s*([^,]+),/);
        if(!headMatch) continue;
        const [, typ, key] = headMatch;
        const body = block.slice(block.indexOf('{')+1).replace(/^[^{]*?,/,'').replace(/\}\s*$/,'');
        const get = (name)=> {
          const re = new RegExp(name+`\\s*=\\s*(\\{([^{}]*|\\{[^{}]*\\})*\\}|\"[^\"]*\"|[^,\\n]+)`, 'i');
          const m = body.match(re);
          if(!m) return null;
          let v = m[1].trim();
          if(v.startsWith('{') && v.endsWith('}')) v = v.slice(1,-1);
          if(v.startsWith('"') && v.endsWith('"')) v = v.slice(1,-1);
          return v.replace(/\s+/g,' ').trim();
        };
        const title = get('title');
        const author = get('author');
        const year = get('year');
        const journal = get('journal') || get('booktitle') || get('publisher') || '';
        const doi = (get('doi')||'').replace(/^https?:\/\/doi\.org\//,'');
        const eprint = get('eprint') || '';
        const url = get('url') || '';
        const keywords = (get('keywords')||'').toLowerCase();
        const arxivId = eprint || (url.includes('arxiv.org') ? (url.split('/abs/')[1]||url.split('/pdf/')[1]||'').replace('.pdf','') : '');
        const authors = (author||'').split(/\s+and\s+/i).map(s=>s.trim()).filter(Boolean);
        const bibtex = block.trim();
        entries.push({
          id: key,
          type: typ.toLowerCase()==='article' && (journal.toLowerCase().includes('arxiv') || arxivId) ? 'preprint'
               : typ.toLowerCase().includes('inproceedings') ? 'conference'
               : 'journal',
          year: year ? parseInt(year,10) : undefined,
          title: title || key,
          authors,
          venue: journal || '—',
          arxiv: arxivId || null,
          doi: doi || null,
          pdf: url && url.endsWith('.pdf') ? url : null,
          code: null,
          selected: keywords.includes('selected'),
          bibtex
        });
      }
      return entries;
    }
    function handleBibText(text){
      const imported = parseBibTex(text);
      if(imported.length){
        PUBS = dedupe(PUBS.concat(imported));
        saveLocal(PUBS);
        renderPubs();
        drop.classList.remove('drop-active');
        drop.querySelector('p.font-medium').textContent = `Loaded ${imported.length} item${imported.length>1?'s':''} from .bib`;
      } else {
        drop.querySelector('p.font-medium').textContent = 'No entries detected in .bib';
      }
    }
    if (IMPORT_ENABLED && drop) {
      ['dragenter','dragover'].forEach(ev => drop.addEventListener(ev, e => {
        e.preventDefault(); e.stopPropagation(); drop.classList.add('drop-active');
      }));
      ['dragleave','drop'].forEach(ev => drop.addEventListener(ev, e => {
        e.preventDefault(); e.stopPropagation(); drop.classList.remove('drop-active');
      }));
      drop.addEventListener('drop', e => {
        const f = e.dataTransfer.files?.[0]; if (!f) return;
        const reader = new FileReader(); reader.onload = ev => handleBibText(ev.target.result); reader.readAsText(f);
      });
    }
    if (IMPORT_ENABLED && fileInput) {
      fileInput.addEventListener('change', e => {
        const f = e.target.files?.[0]; if (!f) return;
        const reader = new FileReader(); reader.onload = ev => handleBibText(ev.target.result); reader.readAsText(f);
      });
    }

    document.getElementById('exportPubs')?.addEventListener('click', () => {
      const merged = dedupe(PUBS);
      const blob = new Blob([JSON.stringify(merged, null, 2)], {type: 'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'pubs.json';   // always named pubs.json
      document.body.appendChild(a);
      a.click();
      URL.revokeObjectURL(a.href);
      a.remove();
    });
    // Replace "clear local" with a full reset to defaults + file pubs (no reload needed)
    document.getElementById('clearLocal')?.addEventListener('click', async () => {
      localStorage.removeItem(LS_KEY);
      const filePubs = await loadFromFile();         // pulls pubs.json (if present)
      PUBS = dedupe([ ...DEFAULT_PUBS, ...filePubs ]); // drop any imported locals
      renderPubs();
    });

    // Optional repo loader (no-op for now)
    async function loadRepoPubs(){ return []; }

    // Init pubs with repo + local merges
    (async ()=>{
      const repo = await loadRepoPubs();
      const local = loadLocal();
      PUBS = dedupe([ ...PUBS, ...repo, ...local ]);
      renderPubs();
    })();

    /* ----------------------- EXPERIENCE RENDER ----------------------- */
    function chip(txt){ return `<span class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-700">${txt}</span>`; }
    function renderExperience(){
      const ol = document.getElementById('expTimeline'); ol.innerHTML='';
      EXPERIENCE.forEach((item, idx)=>{
        const li = document.createElement('li'); li.className = 'mb-10 ml-6';
        li.innerHTML = `
          <span class="absolute -left-3 flex h-6 w-6 items-center justify-center rounded-full bg-indigo-600 ring-8 ring-white dark:ring-gray-950">
            <span class="h-2.5 w-2.5 rounded-full bg-white dark:bg-gray-900"></span>
          </span>
          <div class="rounded-2xl border border-gray-200 dark:border-gray-800 bg-white/70 dark:bg-gray-900/60 backdrop-blur-sm p-4 shadow-sm">
            <div class="flex flex-wrap items-baseline justify-between gap-2">
              <h3 class="font-medium text-gray-900 dark:text-gray-100">${item.org} — ${item.role}</h3>
              <span class="text-xs font-medium text-gray-500 dark:text-gray-400">${item.years}</span>
            </div>
            ${item.bullets?.length ? `<ul class="mt-3 list-disc pl-5 text-sm text-gray-700 dark:text-gray-300 space-y-1">${item.bullets.map(b=>`<li>${b}</li>`).join('')}</ul>`:''}
            ${item.tags?.length ? `<div class="mt-3 flex flex-wrap gap-2">${item.tags.map(chip).join('')}</div>`:''}
          </div>
        `;
        ol.appendChild(li);
      });
    }
    renderExperience();

    /* ----------------------- TALKS RENDER ----------------------- */
    function renderTalks(){
      const ul = document.getElementById('talkList'); 
      ul.innerHTML = '';
      TALKS.sort((a,b)=>(b.year||0)-(a.year||0)).forEach(t=>{
        const li = document.createElement('li');
        li.className = 'rounded-2xl border border-ink-200 dark:border-ink-700 p-5';
        li.innerHTML = `
          <div class="flex flex-wrap items-baseline justify-between gap-2">
            <h4 class="font-medium">${t.title}</h4>
            <span class="text-xs text-ink-500 dark:text-ink-300">${t.type||''}</span>
          </div>
          <p class="mt-1 text-sm text-ink-600 dark:text-ink-300"><em>${t.venue||''}</em> ${t.year?`· ${t.year}`:''}</p>
          ${t.link?`<div class="mt-2 text-sm"><a class="underline" href="${t.link}">Materials</a></div>`:''}
        `;
        ul.appendChild(li);
      });
    }
    renderTalks();

    /* ----------------------- AWARDS RENDER ----------------------- */
    function renderAwards(){
      const ul = document.getElementById('awardList'); ul.innerHTML='';
      AWARDS.sort((a,b)=>(b.year||0)-(a.year||0)).forEach(a=>{
        const li=document.createElement('li');
        li.className='rounded-2xl border border-ink-200 dark:border-ink-700 p-5';
        li.innerHTML = `<h4 class="font-medium">${a.name}</h4>
          <p class="mt-1 text-sm text-ink-600 dark:text-ink-300">${a.issuer || ''} ${a.year?`· ${a.year}`:''}</p>`;
        ul.appendChild(li);
      });
    }
    renderAwards();

    /* ----------------------- SKILLS RENDER ----------------------- */
    function renderSkills(){
      const grid = document.getElementById('skillGrid'); grid.innerHTML='';
      SKILLS.forEach(s=>{
        const card = document.createElement('div');
        card.className='rounded-2xl border border-ink-200 dark:border-ink-700 p-5';
        card.innerHTML = `<h4 class="font-medium">${s.group}</h4>
          <div class="mt-3 flex flex-wrap gap-2">${(s.items||[]).map(chip).join('')}</div>`;
        grid.appendChild(card);
      });

      // CV skills (just first 6-8 items flattened)
      const cv = document.getElementById('cvSkills'); cv.innerHTML='';
      const flat = SKILLS.flatMap(s=>s.items).slice(0,8);
      flat.forEach(it=>{ const li=document.createElement('li'); li.textContent=it; cv.appendChild(li); });
    }
    renderSkills();

    /* ----------------------- CV PUBS & CV EXP ----------------------- */
    function renderCvPubs(){
      const ul = document.getElementById('cvPubs'); if(!ul) return; ul.innerHTML='';
      [...PUBS].sort((a,b)=>(b.year||0)-(a.year||0)).forEach(p=>{
        const li=document.createElement('li');
        const authors = Array.isArray(p.authors) ? p.authors.join(', ') : (p.authors||'');
        li.textContent = `${p.title}${authors ? ' — '+authors : ''}${p.venue ? ' — '+p.venue : ''}${p.year ? ' ('+p.year+')' : ''}`;
        ul.appendChild(li);
      });
    }
    function renderCvExp(){
      const ul = document.getElementById('cvExp'); ul.innerHTML='';
      EXPERIENCE.slice(0,3).forEach(e=>{
        const li=document.createElement('li');
        li.textContent = `${e.role} — ${e.org} — ${e.years}`;
        ul.appendChild(li);
      });
    }
    renderCvExp();

    // 3) Off-canvas sidebar controls (mobile)
    const navBtn   = document.getElementById('navToggle');
    const sidebar  = document.getElementById('sidebar');
    const backdrop = document.getElementById('backdrop');

    function setNav(open) {
      if (open) {
        sidebar.classList.remove('-translate-x-full');
        backdrop.classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
        navBtn?.setAttribute('aria-expanded', 'true');
      } else {
        sidebar.classList.add('-translate-x-full');
        backdrop.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
        navBtn?.setAttribute('aria-expanded', 'false');
      }
    }
    navBtn?.addEventListener('click', () => {
      const willOpen = sidebar.classList.contains('-translate-x-full');
      setNav(willOpen);
    });
    backdrop?.addEventListener('click', () => setNav(false));
    window.addEventListener('keydown', (e) => { if (e.key === 'Escape') setNav(false); });

    // Close after clicking a sidebar link on mobile
    sidebar?.querySelectorAll('a[href^="#"], a[href^="http"]').forEach(a=>{
      a.addEventListener('click', () => { if (window.innerWidth < 1024) setNav(false); });
    });

    /* ----------------------- EXTRACURRICULAR RENDER ----------------------- */
    function renderExtracurricular(){
      const ul = document.getElementById('extraList');
      if (!ul) return;
      ul.innerHTML = '';
      EXTRACURRICULAR.forEach(e=>{
        const li = document.createElement('li');
        li.className = 'rounded-2xl border border-ink-200 dark:border-ink-700 p-5';
        li.innerHTML = `
          <h4 class="font-medium">${e.name}</h4>
          <p class="mt-1 text-sm text-ink-600 dark:text-ink-300">${e.place}${e.years ? ' · ' + e.years : ''}</p>
        `;
        ul.appendChild(li);
      });
    }
    renderExtracurricular();
  </script>
</body>
</html>